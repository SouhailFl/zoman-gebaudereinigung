---
import Layout from '../../layouts/Layout.astro';
import ServiceCard from '../../components/ServiceCard.astro';
import CloudParallax from '../../components/CloudParallax.astro';
import ZomanCharacterPopup from '../../components/ZomanCharacterPopup.astro';

const currentLang = 'en';
---

<Layout 
  title="Zoman Building Cleaning - Professional Cleaning Services in Krefeld"
  description="Professional building cleaning, window cleaning, and solar panel cleaning in Krefeld and surroundings. Reliable, thorough, and on time."
  lang={currentLang}
>
  <!-- Cloud Parallax Background -->
  <CloudParallax />

  <!-- Character Popup -->
  <ZomanCharacterPopup lang="en" />
  <!-- Hero Section with Image Parallax -->
  <section 
    class="relative min-h-screen flex items-center justify-center overflow-hidden"
    id="hero-section"
    role="region"
    aria-label="Hero section"
  >
    <!-- Parallax Background Image - optimized for mobile -->
    <div 
      class="absolute inset-0 bg-cover bg-center"
      id="parallax-bg"
      style="background-image: url('/images/modern-building-cleaning.webp'); background-position: center center; background-attachment: fixed; will-change: transform; background-size: cover;"
    ></div>

    <!-- Dark overlay for text readability -->
    <div class="absolute inset-0 bg-black bg-opacity-40"></div>

    <!-- Content Container -->
    <div class="relative z-10 container mx-auto px-4 py-20 text-center md:text-left">
      <div class="max-w-3xl">
        <h1 class="text-5xl md:text-6xl font-bold mb-6 text-white leading-tight animate-fade-in" role="heading" aria-level="1">
          Zoman Building Cleaning
        </h1>
        <p class="text-xl md:text-2xl mb-8 text-white leading-relaxed animate-fade-in-delayed">
          Professional cleaning services for your home and business in Krefeld
        </p>
        <div class="flex gap-4 flex-wrap justify-center md:justify-start">
          <a 
            href="/en/services" 
            class="inline-block bg-white text-zoman-navy px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-white"
            aria-label="Navigate to our services"
          >
            Our Services
          </a>
          <a 
            href="/en/contact" 
            class="inline-block border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-zoman-navy transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-white"
            aria-label="Open contact form"
          >
            Contact Us
          </a>
        </div>
      </div>
    </div>

    <!-- Scroll indicator -->
    <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 z-10">
      <div class="animate-bounce text-white" aria-hidden="true">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
        </svg>
      </div>
    </div>
  </section>

  <!-- Services Overview -->
  <section class="py-16 bg-gray-50" id="services-overview" role="region" aria-label="Services overview">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl md:text-4xl font-bold text-center mb-12 text-zoman-navy">
        Our Services
      </h2>
      <div class="grid md:grid-cols-3 gap-8">
        <ServiceCard 
          title="House Cleaning"
          description="Thorough cleaning of your entire house or apartment, from kitchen to bathroom."
          icon="🏠"
          link="/en/services#house-cleaning"
        />
        <ServiceCard 
          title="Window Cleaning"
          description="Streak-free window cleaning for homes and businesses, inside and out."
          icon="🪟"
          link="/en/services#window-cleaning"
        />
        <ServiceCard 
          title="Solar Panel Cleaning"
          description="Professional cleaning of your solar panels for maximum energy efficiency."
          icon="☀️"
          link="/en/services#solar-cleaning"
        />
      </div>
    </div>
  </section>

  <!-- Why Choose Us -->
  <section class="py-16" id="why-us" role="region" aria-label="Why choose us">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl md:text-4xl font-bold text-center mb-12 text-zoman-navy">
        Why Choose Zoman?
      </h2>
      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
        <div class="text-center p-6 rounded-lg hover:shadow-lg transition-shadow focus-within:ring-2 focus-within:ring-zoman-cyan" role="article">
          <div class="text-4xl mb-4" aria-hidden="true">✅</div>
          <h3 class="font-semibold mb-2 text-lg">Reliable</h3>
          <p class="text-gray-600">Punctual and on schedule</p>
        </div>
        <div class="text-center p-6 rounded-lg hover:shadow-lg transition-shadow focus-within:ring-2 focus-within:ring-zoman-cyan" role="article">
          <div class="text-4xl mb-4" aria-hidden="true">💎</div>
          <h3 class="font-semibold mb-2 text-lg">Quality</h3>
          <p class="text-gray-600">Professional standards</p>
        </div>
        <div class="text-center p-6 rounded-lg hover:shadow-lg transition-shadow focus-within:ring-2 focus-within:ring-zoman-cyan" role="article">
          <div class="text-4xl mb-4" aria-hidden="true">🌱</div>
          <h3 class="font-semibold mb-2 text-lg">Eco-Friendly</h3>
          <p class="text-gray-600">Environmentally friendly cleaning products</p>
        </div>
        <div class="text-center p-6 rounded-lg hover:shadow-lg transition-shadow focus-within:ring-2 focus-within:ring-zoman-cyan" role="article">
          <div class="text-4xl mb-4" aria-hidden="true">💰</div>
          <h3 class="font-semibold mb-2 text-lg">Fair</h3>
          <p class="text-gray-600">Transparent pricing</p>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="bg-zoman-navy text-white py-16" id="cta" role="region" aria-label="Call to action">
    <div class="container mx-auto px-4 text-center">
      <h2 class="text-3xl md:text-4xl font-bold mb-4 text-white">
        Ready for a Clean Environment?
      </h2>
      <p class="text-lg md:text-xl mb-8 text-white">
        Contact us today for a no-obligation quote
      </p>
      <a 
        href="/en/contact" 
        class="inline-block bg-zoman-cyan-light text-zoman-navy px-8 py-3 rounded-lg font-semibold hover:bg-zoman-cyan transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-zoman-cyan-light"
        aria-label="Request a quote"
      >
        Request a Quote Now
      </a>
    </div>
  </section>
</Layout>

<style>
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fade-in 0.6s ease-out forwards;
    will-change: opacity, transform;
  }

  .animate-fade-in-delayed {
    animation: fade-in 0.6s ease-out 0.1s forwards;
    opacity: 0;
    will-change: opacity, transform;
  }
  
  /* Accessibility improvements */
  .animate-bounce {
    animation: none !important;
  }
  
  @media (max-width: 639px) {
    .animate-bounce {
      display: none;
    }
  }
</style>

<script is:inline>
  // Defer parallax initialization to after page load
  const initParallax = () => {
    // Disable parallax on mobile entirely for performance
    if (window.innerWidth < 768) {
      const parallaxBg = document.getElementById('parallax-bg');
      if (parallaxBg) {
        parallaxBg.style.backgroundAttachment = 'scroll';
      }
      return; // Exit early on mobile
    }
    
    // Optimized parallax scrolling with IntersectionObserver
    const parallaxBg = document.getElementById('parallax-bg');
    const heroSection = document.getElementById('hero-section');
    
    if (parallaxBg && heroSection) {
      let isVisible = false;
      let ticking = false;

      // Intersection Observer to check if element is in view
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          isVisible = entry.isIntersecting;
        });
      }, { threshold: 0 });

      observer.observe(heroSection);

      const updateParallax = () => {
        if (isVisible) {
          const scrollY = window.scrollY;
          const offset = scrollY * 0.5;
          parallaxBg.style.transform = `translateY(${offset}px)`;
        }
        ticking = false;
      };

      window.addEventListener('scroll', () => {
        if (!ticking) {
          requestAnimationFrame(updateParallax);
          ticking = true;
        }
      }, { passive: true, capture: false });
    }
  };
  
  // Initialize after page load to avoid blocking
  if (document.readyState === 'complete') {
    initParallax();
  } else {
    window.addEventListener('load', initParallax);
  }
</script>